<odoo>

    <!-- LISTA de colas existentes -->
  <record id="view_work_queue_plan_tree" model="ir.ui.view">
    <field name="name">work.queue.plan.list</field>
    <field name="model">work.queue.plan</field>
    <field name="arch" type="xml">
      <list>
        <field name="workcenter_id" string="Centro de trabajo"/>
        <field name="employee_id"  string="Empleado"/>
        <field name="line_count"   string="En cola"/>
        <field name="write_date"   string="Ãšltima actualizaciÃ³n"/>
      </list>
    </field>
  </record>

  <!-- SEARCH ultra simple (sin grupos/filters) -->
  <record id="view_work_queue_plan_search" model="ir.ui.view">
    <field name="name">work.queue.plan.search</field>
    <field name="model">work.queue.plan</field>
    <field name="arch" type="xml">
      <search>
        <field name="workcenter_id"/>
        <field name="employee_id"/>
      </search>
    </field>
  </record>

  <!-- ===== Form ancho (sin cambios funcionales) ===== -->
  <record id="view_work_queue_plan_form" model="ir.ui.view">
    <field name="name">work.queue.plan.form</field>
    <field name="model">work.queue.plan</field>
    <field name="arch" type="xml">
      <!-- sin <sheet>: ancho completo real -->
      <form string="Planificador" class="o_form_nosheet o_form_full_width mrp-wq-edge">

        <!-- filtros arriba -->
        <group>
          <field name="workcenter_id" required="1" string="Centro de trabajo"/>
          <field name="employee_id"  required="1" string="Empleado"/>
        </group>

        <header>
          <button name="action_load_available" type="object" string="Cargar disponibles" class="btn-secondary"/>
        </header>

        <!-- dos columnas 50/50 de verdad -->
        <div class="o_row mrp-wq-row">
          <!-- IZQUIERDA -->
          <div class="o_col-6 mrp-wq-col">
            <h3 class="mrp-wq-title">Operaciones disponibles</h3>
            <field name="backlog_item_ids"
                   nolabel="1"
                   domain="[('employee_id','=',False),
                            ('workcenter_id','=',workcenter_id),
                            ('workorder_id.state','!=','done'),
                            ('workorder_id.state','!=','cancel')]"
                   context="{'active_id': id}"
                   options="{'no_create': True, 'no_create_edit': True, 'no_edit': True}">
              <list create="0" delete="0">
                <field name="workorder_id"   string="OperaciÃ³n"/>
                <field name="workcenter_id"  string="Centro de trabajo"/>
                <field name="product_id"     string="Producto"/>
                <field name="state"          string="Estado"/>
                <button name="action_assign_to_employee"
                        type="object"
                        string="â†’"
                        class="btn-primary"
                        title="Asignar a la cola del empleado"/>
              </list>
            </field>
          </div>

          <!-- DERECHA -->
          <div class="o_col-6 mrp-wq-col">
            <h3 class="mrp-wq-title">Cola del empleado</h3>
            <field name="line_ids"
                   nolabel="1"
                    domain="[('employee_id','=',employee_id), ('workcenter_id','=',workcenter_id)]"
                    context="{'active_id': id}"
                    class="mrp-wq-nosort"  <!-- clase para el truco CSS -->
                    options="{'no_create': True, 'no_create_edit': True}">
                <list create="0" delete="0" editable="bottom">
                  <field name="sequence" widget="handle" string=""/>
                  <field name="priority_index" string="Prioridad" readonly="1"/>
                  <field name="workorder_id"   string="OperaciÃ³n"/>
                  <field name="product_id"     string="Producto"/>
                  <field name="state"          string="Estado"/>
                  <button name="action_print_wo_80mm"
                          type="object"
                          string="ðŸ–¨"
                          class="btn-primary"
                          title="Imprimir OT 80mm (sÃ³lo la primera)"/>
                  <button name="action_unassign"
                          type="object"
                          string="â†"
                          class="btn-secondary"
                          title="Quitar de la cola"/>
                </list>
              </field>
          </div>
        </div>

      </form>
    </field>
  </record>

</odoo>
