<odoo>

    <!-- LISTA de colas existentes -->
  <record id="view_work_queue_plan_tree" model="ir.ui.view">
    <field name="name">work.queue.plan.list</field>
    <field name="model">work.queue.plan</field>
    <field name="arch" type="xml">
      <list>
        <field name="workcenter_id" string="Centro de trabajo"/>
        <field name="employee_id"  string="Empleado"/>
        <field name="line_count"   string="En cola"/>
        <field name="write_date"   string="Última actualización"/>
      </list>
    </field>
  </record>

  <!-- SEARCH de la lista -->
  <record id="view_work_queue_plan_search" model="ir.ui.view">
    <field name="name">work.queue.plan.search</field>
    <field name="model">work.queue.plan</field>
    <field name="arch" type="xml">
      <search string="Buscar colas">
        <field name="workcenter_id"/>
        <field name="employee_id"/>

        <group expand="0" string="Agrupar por">
          <filter string="Centro de trabajo" context="{'group_by':'workcenter_id'}"/>
          <filter string="Empleado" context="{'group_by':'employee_id'}"/>
        </group>
      </search>
    </field>
  </record>

  <!-- ===== Form ancho (sin cambios funcionales) ===== -->
  <record id="view_work_queue_plan_form" model="ir.ui.view">
    <field name="name">work.queue.plan.form</field>
    <field name="model">work.queue.plan</field>
    <field name="arch" type="xml">
      <!-- sin <sheet>: ancho completo real -->
      <form string="Planificador" class="o_form_nosheet o_form_full_width mrp-wq-edge">

        <!-- filtros arriba -->
        <group>
          <field name="workcenter_id" required="1" string="Centro de trabajo"/>
          <field name="employee_id"  required="1" string="Empleado"/>
        </group>

        <header>
          <button name="action_load_available" type="object" string="Cargar disponibles" class="btn-secondary"/>
        </header>

        <!-- dos columnas 50/50 de verdad -->
        <div class="o_row mrp-wq-row">
          <!-- IZQUIERDA -->
          <div class="o_col-6 mrp-wq-col">
            <h3 class="mrp-wq-title">Operaciones disponibles</h3>
            <field name="backlog_item_ids"
                   nolabel="1"
                   domain="[('employee_id','=',False), ('workcenter_id','=',workcenter_id)]"
                   context="{'active_id': id}"
                   options="{'no_create': True, 'no_create_edit': True, 'no_edit': True}">
              <list create="0" delete="0">
                <field name="workorder_id"   string="Operación"/>
                <field name="workcenter_id"  string="Centro de trabajo"/>
                <field name="product_id"     string="Producto"/>
                <field name="state"          string="Estado"/>
                <button name="action_assign_to_employee"
                        type="object"
                        string="→"
                        class="btn-primary"
                        title="Asignar a la cola del empleado"/>
              </list>
            </field>
          </div>

          <!-- DERECHA -->
          <div class="o_col-6 mrp-wq-col">
            <h3 class="mrp-wq-title">Cola del empleado</h3>
            <field name="line_ids"
                   nolabel="1"
                   domain="[('employee_id','=',employee_id), ('workcenter_id','=',workcenter_id)]"
                   context="{'active_id': id}"
                   options="{'no_create': True, 'no_create_edit': True}">
              <list create="0" delete="0" editable="bottom">
                <field name="sequence" widget="handle" string="#"/>
                <field name="workorder_id"   string="Operación"/>
                <field name="workcenter_id"  string="Centro de trabajo"/>
                <field name="product_id"     string="Producto"/>
                <field name="state"          string="Estado"/>
                <button name="action_unassign"
                        type="object"
                        string="←"
                        class="btn-secondary"
                        title="Quitar de la cola"/>
              </list>
            </field>
          </div>
        </div>

      </form>
    </field>
  </record>

</odoo>
